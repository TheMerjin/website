---
const { post } = Astro.props;
---
 

<article class="lw-post-card">
  <header class="lw-post-header">
    <a href={`posts/${post.id}`} class="lw-post-title">
      {post.title}
    </a>
    <div class="lw-post-meta">
      <span class="lw-post-author">
        <a href={`/${post.username}`} style="color: inherit; text-decoration: none;">
          {post.username}
        </a>
      </span>
      <time datetime={post.created_at} class="lw-post-date">
        {new Date(post.created_at).toLocaleDateString(undefined, { month: 'short', day: 'numeric', year: 'numeric' })}
      </time>
    </div>
  </header>
  <div class="lw-post-stats">
    <span class="lw-post-upvotes">
      <svg class="up-arrow" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#888" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round" style="margin-bottom: 2px;"><polyline points="6 15 12 9 18 15"></polyline></svg>
      <span class="upvote-count">1</span>
    </span>
    <span class="lw-post-comments">
      {post.comments_count ?? '0'}
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline-block ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
      </svg>
    </span>
  </div>
</article>

<style>
  /* Base styles for the card */
  .lw-post-card {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 800px;
    width: 100%;
    margin: 0rem 7rem 0rem 7rem;
    margin-left: 0rem;
    padding: 0.75rem 1rem;
    border-bottom: 1px solid #eee;
    background-color: #fff;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    transition: all 0.2s ease-in-out;
  }

  .lw-post-card:hover {
    background-color: #f9f9f9; /* Light background on hover */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* More pronounced shadow on hover */
  }

  /* Header: title left, meta right within its own flex container */
  .lw-post-header {
    display: flex;
    flex-direction: column; /* Stack title and meta */
    flex-grow: 1; /* Allow header to grow */
    margin-right: 1.5rem; /* Space between header and stats */
  }

  .lw-post-title {
    font-family: 'Inter', sans-serif; /* Modern sans-serif font */
    font-size: 1.0rem; /* Slightly larger title */
    line-height: 1.4;
    color: #333; /* Darker text for better readability */
    text-decoration: none;
    font-weight: 600; /* Bolder title */
    margin-bottom: 0.25rem; /* Space between title and meta */
  }

  .lw-post-title:hover {
    color: #adadab; /* Blue on hover for a link feel */
  }

  .lw-post-meta {
    display: flex;
    align-items: center; /* Align author and date horizontally */
    font-family: 'Inter', sans-serif;
    font-size: 0.8rem; /* Smaller meta info */
    color: #777; /* Lighter color for meta */
  }

  .lw-post-author {
    font-weight: 500;
    margin-right: 0.5rem; /* Space between author and date */
  }

  .lw-post-date {
    font-style: normal;
  }

  /* New styles for the stats section (votes and comments) */
  .lw-post-stats {
    display: flex;
    align-items: flex-end;
    gap: 1.2rem;
    font-family: 'Inter', sans-serif;
    font-size: 0.8rem;
    color: #555;
  }

  .lw-post-upvotes {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-end;
    min-width: 32px;
    margin-right: 0.5rem;
    user-select: none;
    margin-top: -4px;
  }

  .lw-post-upvotes .up-arrow {
    color: #888;
    width: 18px;
    height: 18px;
    margin-bottom: 2px;
  }

  .lw-post-upvotes .upvote-count {
    font-size: 0.98rem;
    font-family: 'Inter', Helvetica, Arial, sans-serif;
    font-weight: 600;
    color: #666;
    margin-top: 0.1rem;
    letter-spacing: 0.01em;
    text-align: center;
    line-height: 1.2;
  }

  .lw-post-comments {
    display: flex;
    align-items: flex-end;
    gap: 0.3rem;
    margin-top: -4px;
  }

  .lw-post-comments .comment-count {
    font-size: 0.98rem;
    font-family: 'Inter', Helvetica, Arial, sans-serif;
    font-weight: 600;
    color: #666;
    line-height: 1.2;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f0f0f0;
    border-radius: 50%;
    width: 28px;
    height: 28px;
    text-align: center;
    vertical-align: bottom;
    margin-right: 0.1rem;
  }

  .lw-post-comments svg {
    color: #888; /* Icon color */
  }

  /* Responsive adjustments */
  @media (max-width: 800px) {
    .lw-post-card {
      flex-direction: column;
      align-items: stretch;
      max-width: 98vw;
      padding: 0.7rem 0.3rem;
      margin: 1rem auto;
    }
    .lw-post-header {
      flex-direction: column;
      align-items: flex-start;
      margin-right: 0;
      margin-bottom: 0.5rem;
      width: 100%;
    }
    .lw-post-title {
      font-size: 1.05rem;
      text-align: left;
      margin-bottom: 0.2rem;
    }
    .lw-post-meta {
      font-size: 0.8rem;
      margin-top: 0.2rem;
      flex-wrap: wrap;
    }
    .lw-post-stats {
      width: 100%;
      justify-content: flex-start;
      font-size: 0.85rem;
      gap: 0.5rem;
      margin-top: 0.3rem;
    }
    .lw-post-comments {
      padding: 0.18rem 0.4rem;
      font-size: 0.85rem;
    }
  }
  @media (max-width: 500px) {
    .lw-post-card {
      max-width: 100vw;
      padding: 0.5rem 0.1rem;
      margin: 0.5rem 0;
      border-radius: 0.5em;
    }
    .lw-post-header {
      margin-bottom: 0.2rem;
    }
    .lw-post-title {
      font-size: 0.92rem;
      padding-right: 0.2rem;
    }
    .lw-post-meta {
      font-size: 0.7rem;
      margin-top: 0.1rem;
    }
    .lw-post-stats {
      font-size: 0.75rem;
      gap: 0.3rem;
    }
    .lw-post-comments {
      padding: 0.12rem 0.25rem;
      font-size: 0.75rem;
    }
  }
</style>