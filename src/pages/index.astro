---
import WebsiteLayout from '../layouts/WebsiteLayout.astro';
import Postcard from '../components/PostCard.astro';

const res = await fetch(`${import.meta.env.PUBLIC_API_URL}api/auth/get_posts`);
const { posts } = await res.json();
---
<WebsiteLayout>
	<main id="posts-container">
		<script is ="in-line">
			console.log(posts)
		</script>
		{posts.length === 0 ? (
			<p>No posts yet!</p>
		) : (
			posts.map((post: any) => <Postcard post={post} key={post.id} />)
		)}
	</main>
</WebsiteLayout>