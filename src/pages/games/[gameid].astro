---



import { supabase } from '../../lib/supabase';
import { Astro } from 'astro';

const { gameid } = Astro.params;
let game = null;
let error = null;

try {
  const { data, error: fetchError } = await supabase
    .from('games')
    .select('*')
    .eq('id', gameid)
    .maybeSingle();
  if (fetchError || !data) {
    error = 'Game not found.';
  } else {
    game = data;
  }
} catch (err) {
  error = 'Error loading game.';
}
---

<html>
  <head>
    <title>Game {gameid}</title>
  </head>
  <body>
    <h1>Game {gameid}</h1>
    {error && <div class="error">{error}</div>}
    {game && (
      <div>
        <div>Status: {game.status}</div>
        <div>White: {game.white}</div>
        <div>Black: {game.black}</div>
        <div>FEN: {game.fen}</div>
        <div>Moves: {game.moves?.join(', ')}</div>
        {game.status === 'active' && (
          <div class="chess-board-placeholder">[Chess board goes here]</div>
        )}
      </div>
    )}
  </body>
</html> 